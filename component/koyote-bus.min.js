(function(o,g,b){var i="undefined",p=false,j=p,a={},f=console.log,v;function d(y){return y.concat()}function n(y,z){return y instanceof z}function q(z){try{return n(z,Event)}catch(y){if(z.altKey!==b&&(z.srcElement||z.target)){return true}}return p}function c(z){var y=o.jQuery;return y?n(z,y):p}function t(z,y){return typeof z===y}function s(y){return y}function l(z,A){for(var y in z){if(z.hasOwnProperty(y)){A.call(z,z[y],y)}}}function m(A,z){var B=0,y;if(!t(A,i)){y=A.length-1;for(;y>=0;y--){if(A[y].subscriber===z){B++;A.splice(y,1)}}}return B}function r(y,D,B){var z,C,A,E=0;l(y,function(G,F){z=F.split(":");C=D;A=F;if(z[0]==="global"){C=z[0];A=z[1]}E+=m(a[C][A],B)});return E}function h(z,y){if(a[z]===b){a[z]={}}if(a[z][y]===b){a[z][y]=[]}return a[z][y]}function u(y){var z;if(null==y||!t(y,"object")||y.constructor.toString().indexOf("Object()")===-1||q(y)||c(y)||(y.nodeType&&y.nodeType===1)){return y}if(n(y,Date)){z=new Date();z.setTime(y.getTime());return z}if(n(y,Array)){z=d(y);return z}if(n(y,Object)){z={};l(y,function(B,A){z[A]=u(B)});return z}throw ("Unable to copy object!")}function x(y,A,z){l(y,function(C,B){v.subscribeTo(A,B,C,z)})}function e(B,A,z,y){B.handler.call(B.subscriber,A);j&&f(z,y,B)}function w(z,y){var A=[];if(!t(z,i)){l(z,function(C,B){if(B===y){A=C}})}return A}v={subscribers:function(z,y){return w(a[z],y)},unsubscribeFrom:function(D,y,z){var C=h(D,y),B,A=C.length-1;for(;A>=0;A--){B=C[A];if(B.subscriber===z){C.splice(A,1)}}},subscribeTo:function(C,y,A,z){var B=h(C,y);B.push({subscriber:z,handler:A})},subscribe:function(z){var y=z.events;if(!z||y===b){return p}l(y,function(A,B){if(a[B]===b){a[B]={}}x(A,B,z)});return true},unsubscribe:function(z){var A=0,y=z.events;if(!z||y===b){return p}l(y,function(B,C){if(a[C]===b){a[C]={}}A=r(B,C,z)});return A>0},publish:function(C,A,B){var D=d(this.subscribers(C,A)),y=D.length,z;if(y===0){return p}B=s(B);while(!!(z=D.shift())){e(z,B,C,A)}return true},preprocessorPublishData:function(y){s=function(z){return y(z,u)}},reset:function(){a={global:{}}},setDebug:function(y){j=y},getCopyChannels:function(){return u(a)}};function k(y){return(y.Bus=v)}if(typeof define!==i){define("koyote-bus",["koyote"],k)}else{k(g)}}(this,(Koyote=this.Koyote||{})));