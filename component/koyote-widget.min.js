(function(h,i){var j=Array.prototype.slice,c=Object.prototype.toString,d=function(k){return j.call(k)},b=function(k){return c.call(k)==="[object Function]"},a=function(m,k,n,l){return function(p){var q=p.target,o;o=l?j.call(k.querySelectorAll(l)):[k];while(q!==h&&o.indexOf(q)===-1){q=q.parentNode}if(q!==h){n.call(q,p,m)}}},f=function(p,r){var m=/\{\{([^\}]*)\}\}/gi,k=p,q,o=h.createDocumentFragment(),n=h.createElement("div"),l;o.appendChild(n);while(q=m.exec(p)){k=k.replace(q[0],r[q[1].trim()])}n.innerHTML=k;l=d(n.childNodes);l.forEach(function(s){o.appendChild(s)});o.removeChild(n);return o},e=function(l,m){l.appendChild(m);var k=l.lastChild;while(k&&k.nodeType!==1){k=k.previousSibling}return k};function g(l,k){return(l.Widget=k.mix({constructor:function(m,n,o){l.callMethod("Component.constructor",this,[n||"widget",o]);this.container=m;this.element=null;this.domCallbacks=[]},"@getContainer":function(){if(!this.container){var m=this.getParent();this.container=m&&m.getElement()}return this.container},"@getElement":function(){return this.element},"@template":"","@render":function(n){var m=f(this.template,n);if(this.element){this.removeElement()}this.element=e(this.getContainer(),m);this.bindEvents();this.getChildren().forEach(function(o){if(b(o.render)){o.render()}})},"@removeElement":function(){this.getChildren().forEach(function(m){if(m.element){m.removeElement();m.container=null}});this.unbindEvents();this.getContainer().removeChild(this.element);this.element=null},"@bindEvents":function(){var o=this.element,m=this.domEvents,q=this.domCallbacks,t,p,n,s;for(var r in m){if(m.hasOwnProperty(r)){t=r.split(":");p=t[1]&&t[0];n=t[1]||t[0];s=a(this,o,m[r],p);q.push({eventName:n,callback:s});o.addEventListener(n,s)}}},"@unbindEvents":function(){var m=this.element;this.domCallbacks.forEach(function(n){m.removeEventListener(n.eventName,n.callback)});this.domCallbacks=[]},"@domEvents":{},"@destroy":function(){this.unbindEvents();this.getContainer().removeChild(this.element);this.element=null;this.container=null;l.callMethod("Component.destroy",this)}}))}if(typeof define!=="undefined"){define("koyote-widget",["koyote","koyote-component"],g)}else{g(i,i.Component)}}(document,Koyote));