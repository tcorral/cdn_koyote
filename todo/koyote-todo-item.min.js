(function(b){function a(d,c,e){return(d.TodoItem=e.mix({constructor:function(f){d.callMethod("Widget.constructor",this,[null,"todo-item",f.id]);this.text=f.text;this.checked=!!f.checked},"@template":'<li class="todo-item {{ doneclass }}" id="{{ id }}"><input type="checkbox" class="todo-check" {{ checkedattr }} /><span class="todo-label" contenteditable="true" title="Click to edit">{{ text }}</span></li>',"@render":function(){var g="",f="";if(!!this.checked){g='checked="checked"';f="todo-done"}d.callMethod("Widget.render",this,[{id:this.id,text:this.text,checkedattr:g,doneclass:f}])},update:function(g,f){var i=f.querySelector(".todo-label").innerHTML,h=!!f.querySelector(".todo-check").checked;g.text=i;g.checked=h;c.publish("todos","todo:update",{todos:[{id:f.id,text:i,checked:h}]})},"@domEvents":{".todo-check:change":function(h,g){var f=this.parentNode;f.classList.toggle("todo-done");d.TodoItem.update(g,f)},".todo-label:input":function(g,f){d.TodoItem.update(f,this.parentNode)},".todo-label:keypress":function(f){if([13,27].indexOf(f.keyCode)>-1){f.preventDefault();this.blur();return}}}}))}if(typeof define!=="undefined"){define("koyote-todo-item",["koyote","koyote-bus","koyote-widget"],a)}else{a(b,b.Bus,b.Widget)}}(Koyote));