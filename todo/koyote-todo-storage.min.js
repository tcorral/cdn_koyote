(function(d,c){var b=d.localStorage,f=d.JSON,e={"go-running":{id:"go-running",text:"Go running (default)",checked:false},drink:{id:"drink",text:"Drink (default)",checked:false},sleep:{id:"sleep",text:"Sleep (default)",checked:false}};function a(i,g,h){return(i.TodoStorage=h.mix({constructor:function(){i.callMethod("Component.constructor",this,["todo-storage"]);this.todos={};this.restore();g.subscribe(this);g.publish("todos","list:restore",this.todos)},"@events":{todos:{"todo:update":function(j){j.todos.forEach(this.save.bind(this))},"todo:add":function(j){j.todos.forEach(this.save.bind(this))}}},"@save":function(j){this.todos[j.id]=j;b.setItem("todos",f.stringify(this.todos))},"@restore":function(){this.todos=f.parse(b.getItem("todos"))||e}}))}if(typeof define!=="undefined"){define("koyote-todo-storage",["koyote","koyote-bus","koyote-component"],a)}else{a(c,c.Bus,c.Component)}}(window,Koyote));